{% extends 'base.html' %}

{% load static %}

{% block header %}
<div class="container mt-5">
  <h2 class="mb-4">{{ item.name }}</h2>

  {% if item.image %}
    <img src="{{ item.image.url }}" class="img-fluid mb-3" alt="{{ item.name }}">
  {% else %}
    <img src="{% static 'img/category/shop.jpg' %}" class="img-fluid mb-3" alt="{{ item.name }}">
  {% endif %}

  <p><strong>ã‚«ãƒ†ã‚´ãƒªãƒ¼:</strong> {{ item.category.name }}</p>
  <p><strong>ä½æ‰€:</strong> {{ item.address }}</p>
  <p><strong>é›»è©±ç•ªå·:</strong> {{ item.phone }}</p>
  <p><strong>èª¬æ˜:</strong> {{ item.description|default:"èª¬æ˜ã¯ã‚ã‚Šã¾ã›ã‚“" }}</p>

  <p><strong>å¹³å‡è©•ä¾¡:</strong> â­ï¸ 
    {% if avg_rating %}
        {{ avg_rating }} / 5
    {% else %}
        -
    {% endif %}
  </p>
 

  <h4 class="mt-4">ãƒ¬ãƒ“ãƒ¥ãƒ¼</h4>
  {% if reviews %}
    <ul class="list-group">
      {% for review in reviews %}
        <li class="list-group-item">
          <strong>{{ review.user.username }}</strong> â­ï¸ {{ review.rating }}<br>
          {{ review.title }}<br>
          {{ review.content }}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
  {% endif %}

  {% if user.is_authenticated and user.is_premium %}
    <a href="{% url 'review_write' item.id %}" class="btn btn-primary mt-3">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ã</a>
  {% elif user.is_authenticated %}
    <p class="mt-3">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ãã«ã¯æœ‰æ–™ä¼šå“¡ã«ãªã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
       <a href="{% url 'premium' %}">æœ‰æ–™ä¼šå“¡ç™»éŒ²ã¯ã“ã¡ã‚‰</a>
    </p>
  {% else %}
    <p class="mt-3">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ãã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚
       <a href="{% url 'login' %}">ãƒ­ã‚°ã‚¤ãƒ³ã¯ã“ã¡ã‚‰</a>
    </p>
  {% endif %}

  {% if user.is_authenticated and user.is_premium %}
    <a href="{% url 'toggle_favorite' item.id %}" class="btn btn-outline-danger mt-3">
        {% if is_favorite %}
            â¤ï¸ ãŠæ°—ã«å…¥ã‚Šè§£é™¤
        {% else %}
            ğŸ¤ ãŠæ°—ã«å…¥ã‚Š
        {% endif %}
    </a>
  {% elif user.is_authenticated %}
    <p class="mt-3">ãŠæ°—ã«å…¥ã‚Šç™»éŒ²ã¯æœ‰æ–™ä¼šå“¡ã®ã¿å¯èƒ½ã§ã™ã€‚
       <a href="{% url 'premium' %}">æœ‰æ–™ä¼šå“¡ç™»éŒ²ã¯ã“ã¡ã‚‰</a>
    </p>
  {% else %}
    <p class="mt-3">ãŠæ°—ã«å…¥ã‚Šç™»éŒ²ã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚
       <a href="{% url 'login' %}">ãƒ­ã‚°ã‚¤ãƒ³ã¯ã“ã¡ã‚‰</a>
    </p>
  {% endif %}

  {% if user.is_authenticated and user.is_premium %}
    <a href="{% url 'make_reservation' item.id %}" class="btn btn-success mt-3">äºˆç´„ã™ã‚‹</a>
{% elif user.is_authenticated %}
    <p class="mt-3">äºˆç´„ã¯æœ‰æ–™ä¼šå“¡ã«ãªã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
       <a href="{% url 'premium' %}">æœ‰æ–™ä¼šå“¡ç™»éŒ²ã¯ã“ã¡ã‚‰</a>
    </p>
{% else %}
    <p class="mt-3">äºˆç´„ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚
       <a href="{% url 'login' %}">ãƒ­ã‚°ã‚¤ãƒ³ã¯ã“ã¡ã‚‰</a>
    </p>
{% endif %}

</div>

{% endblock %}
